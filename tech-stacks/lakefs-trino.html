<!DOCTYPE html>
<html lang="en">
<head>
    <title>Data Mesh Architecture: Databricks</title>
    <meta charset="utf-8">
    <meta name="description" content="How to build a data mesh architecture with Databricks" />
    <meta name="keywords" content="data mesh, data mesh architecture, domain-driven data analytics, data analytics, domain-driven design, domain ownership, data as a product, data product, federated governance, self-serve data platform, data platform">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@innoq" />
    <meta name="twitter:title" content="Data Mesh Architecture: Databricks" />
    <meta name="twitter:description" content="How to build a data mesh architecture with Databricks" />
    <meta name="twitter:image" content="https://www.datamesh-architecture.com/images/databricks_card.png" />
    <meta name="twitter:image:alt" content="Data Mesh Architecture: Domains are in the center and teams do analytics on their own. They build and interconnect with data products. A data platform team and a enablement team help. Global policies are agreed through federated governance." />
    <meta property="og:url" content="https://datamesh-architecture.com" />
    <meta property="og:title" content="Data Mesh Architecture: Databricks" />
    <meta property="og:description" content="How to build a data mesh architecture with Databricks" />
    <meta property="og:image" content="https://www.datamesh-architecture.com/images/databricks_card.png" />

    <link rel="preload" as="font" type="font/woff2" href="https://www.innoq.com/assets/MarkPro-Book.woff2?cachebuster=2" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="https://www.innoq.com/assets/MarkPro-Bold.woff2?cachebuster=2" crossorigin="">
    <link rel="preload" as="font" type="font/woff2" href="https://www.innoq.com/assets/MarkPro-Heavy.woff2?cachebuster=2" crossorigin="">
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/0.9.3_css_bulma.css" />
    <link rel="stylesheet" href="../css/font-awesome_6.0.0_css_all.css"/>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
<nav class="navbar is-dark" role="navigation" aria-label="dropdown navigation">
    <div class="container">
        <div class="navbar-brand">
                    <span class="navbar-burger" data-target="navbarMenuHeroA">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </div>
        <div id="navbarMenuHeroA" class="navbar-menu">

            <div class="navbar-end">


                <a href="/#why" class="navbar-item">
                    Why
                </a>
                <a href="/#what-is-data-mesh" class="navbar-item">
                    What
                </a>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a href="/#how-to-design-a-data-mesh" class="navbar-link is-arrowless">
                        How
                    </a>
                    <div class="navbar-dropdown" id="navbarMenuArchitectureDropdown">
                        <a href="/#how-to-design-a-data-mesh" class="navbar-item">Data Mesh Architecture</a>
                        <hr class="navbar-divider">
                        <a href="/#data-product" class="navbar-item">Data Product</a>
                        <a href="/#federated-governance" class="navbar-item">Federated Governance</a>
                        <a href="/#analytical-data" class="navbar-item">Analytical Data</a>
                        <a href="/#ingesting" class="navbar-item">Ingesting</a>
                        <a href="/#clean-data" class="navbar-item">Clean Data</a>
                        <a href="/#analytics" class="navbar-item">Analytics</a>
                        <a href="/#data-platform" class="navbar-item">Data Platform</a>
                        <a href="/#enabling-team" class="navbar-item">Enabling Team</a>
                    </div>
                </div>
                <a href="/#mesh" class="navbar-item">
                    Mesh
                </a>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a href="/#tech-stacks" class="navbar-link is-arrowless">
                        Tech Stacks
                    </a>
                    <div class="navbar-dropdown" id="navbarMenuTechStackDropdown">
                        <a href="/tech-stacks/google-cloud-bigquery.html" class="navbar-item">
                            Google Cloud BigQuery
                        </a>
                        <a href="/tech-stacks/aws-s3-athena.html" class="navbar-item">
                            AWS S3 and AWS Athena
                        </a>
                        <a href="/tech-stacks/azure-synapse-analytics.html" class="navbar-item">
                            Azure Synapse Analytics
                        </a>
                        <a href="/tech-stacks/dbt-snowflake.html" class="navbar-item">
                            dbt and Snowflake
                        </a>
                        <a href="/tech-stacks/databricks.html" class="navbar-item">
                            Databricks
                        </a>
                    </div>
                </div>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a href="/#domain-teams-journey" class="navbar-link is-arrowless">
                        Start the Journey
                    </a>
                    <div class="navbar-dropdown is-right" id="navbarMenuTransformationDropdown">
                        <a href="/#domain-teams-journey" class="navbar-item">
                            Domain Team’s Journey
                        </a>
                        <a href="/#data-teams-journey" class="navbar-item">
                            Data Team’s Journey
                        </a>
                        <a href="/real-world-learnings.html" class="navbar-item">
                            Real World Learnings
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<div class="container">

    <section class="section">

        <nav class="breadcrumb" aria-label="breadcrumbs">
            <ul>
                <li><a href="/">Data Mesh Architecture</a></li>
                <li><a href="/#tech-stacks">Tech Stacks</a></li>
                <li class="is-active"><a href="#" aria-current="page">Databricks</a></li>
            </ul>
        </nav>

        <h1 class="title">LakeFS and Trino</h1>

        <div class="notification is-info is-light">
            Data mesh is primarily an organizational approach, and that's why you can't buy a data mesh from a vendor. Technology, however, is important still as it acts as an enabler for data mesh, and only useful and easy to use solutions will lead to domain teams' acceptance. The available offerings of cloud providers already provide a sufficient set of good self-serve data services to let you form a data platform for your data mesh. We want to show which services can be used to get started.
        </div>

        <div class="content">
            <ul>
                <li>LakeFS with Trino is an alternatvie open source tech stack</li>
                <li>The stack consists of three main technologies/frameworks:</li>

                <ul>
                    <li>MinIO or another s3-compatible object storage</li>
                    <li>LakeFS as a layer on top of the object storage</li>
                    <li>Trino is finally the distibuted query engine that can combine multiple datawarehouses</li>
                </ul>

                <li>Fully open source and highly customizable through various optional expansions like</li>
                <ul>
                    <li>dbt: gives the various benefits as described in the snowflake stack</li>
                    <li>openlineage: is especially usefull if the data lineage is necessary</li>
                </ul>

                <li>can use cloud resources (Object Storage, Compute, Access) from cloud provider or in a local setup through docker containerization</li>
            </ul>
            <strong>TBD needs to be adjusted for lakeFS:</strong>
            <img src="../images/databricks.png.webp" alt="Data Mesh Architecture with LakeFS and Trino" style="width: 100%">

            <div class="columns">
                <div class="column">
                    <p>
                        The workflow with this stack starts with booting up the docker containers.
                        This works in a local mode but also in a cloud environment.
                        When the containers are up and running that the endpoints should be accessable and the
                        programming of data products can begin.
                    </p>
                    <p>
                        The coding then can be done in jupyter notebooks, but depends on the progress and if dbt is used.
                        In the (filling the database)-phase we recommend using python inside of jupyter notebooks,
                        because of a good integration of trino.
                        When the database(s) is(are) already prepared the transformations can then optionally be transfered to dbt.
                    </p>
                </div>
                <div class="column">
                    <figure class="image">
                        <a href="../images/lakeFS_dockercontainers.png" class="glightbox">
                            <img src="../images/lakeFS_dockercontainers.png" alt="Docker container overview">
                        </a>
                    </figure>
                    <figure class="image">
                        <a href="../images/lakeFS_jupyternotebook.png" class="glightbox">
                            <img src="../images/lakeFS_jupyternotebook.png" alt="Jupyter notebook overview">
                        </a>
                    </figure>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <p>
                        In our experience we used a MinIO object storage solution that uses the local storage, but
                        that can be replaced by <strong>any s3-compatible object storage</strong>.
                    </p>
                    <p>
                        The object storage thereby gets layered by <strong>lakeFS, a version control system for data</strong>.
                        With lakeFS the underlying object storage is just saving various data files that get mapped by
                        lakeFS to recieve a filesystem for the user (siehe picture).
                        Thereby each team typically works in its own lakeFS repository.
                    </p>
                </div>
                <div class="column">
                    <figure class="image">
                        <a href="../images/lakeFS_minio_homescreen.png" class="glightbox">
                            <img src="../images/lakeFS_minio_homescreen.png" alt="MinIO Demoscreen">
                        </a>
                    </figure>
                    <figure class="image">
                        <a href="../images/lakeFS_lakefs_homescreen.png" class="glightbox">
                            <img src="../images/lakeFS_lakefs_homescreen.png" alt="LakeFS Demoscreen">
                        </a>
                    </figure>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <p>
                        This storage stack gets then combined with <strong>trino (ehem. presto) a fast and distributed query engine</strong>.
                        Trino is thereby the processing unit that uses the local or cloud resources
                    </p>
                    <p>
                        Thereby trino allows to combine databases from multiple inputs in one sql statement.
                        This is especially useful when the database needs to be transfered, because
                        it can be directly transfered, slowly by keeping old tables and creating new ones in the new database
                        or even fully kept when its compatible with trino.
                    </p>
                </div>
                <div class="column">
                    <figure class="image">
                        <a href="../images/lakeFS_DBeaver_homescreen.png" class="glightbox">
                            <img src="../images/lakeFS_DBeaver_homescreen.png" alt="Any DB picture">
                        </a>
                    </figure>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <p>
                        Data product:
                        - notebook: highly customizable through code, including import, transform, validation, and export;
                            - lots of freedom (sql, python, ...);
                            - custom step to publish data product description may be helpful (dynamic infos)
                        - with dbt: sql statements in dbt models
                            - sql only but benefits of dbt included
                            - custom and predefined tests
                            - dbt models as metadata information
                    </p>
                    <p>
                        The sharing of data products:
                            - easy: done within trino via just accessing database tables of another teams database
                            - intermediate: with access control in lakeFS and sharing of snapshot branches whereby
                                            metadata needs to be published accordingly

                    </p>
                    <p>
                        Mental load: high-medium to very high through the infinite amount of customizability.
                    </p>
                </div>


                <div class="column">
                    <figure class="image">
                        <a href="../images/lakeFS_trino_query.png" class="glightbox">
                            <img src="../images/lakeFS_trino_query.png" alt="notebook trino statement">
                        </a>
                    </figure>
                    <figure class="image">
                        <a href="../images/lakeFS_dbt_query.png" class="glightbox">
                            <img src="../images/lakeFS_dbt_query.png" alt="dbt model statement">
                        </a>
                    </figure>
                </div>


            </div>

            <div class="columns">
                <div class="column">
                    <p>
                        Trino offers an interface that provides information about the queries (ran, running, queued and blocked), performance
                        and workload measurements (active workers, running drivers, reserved memory, rows&bytes /sec, worker parallelism).
                        Additionally there is an detailed overview about every query, which can be sorted and searched through.

                    </p>
                    <p>
                        Furthermore, the performance and managing costs are most likely provided by the cloud provider.
                    </p>
                </div>
                <div class="column">
                    <figure class="image">
                        <a href="../images/lakeFS_trino_overview.png" class="glightbox">
                            <img src="../images/lakeFS_trino_overview.png" alt="Trino 8080 Overview">
                        </a>
                    </figure>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <p>
                        The docker containers can be deployed in a local environment or in the cloud. The only requirement
                        is the s3-compatibility that MinIO is coming with.
                    </p>
                    <p>
                        Because there are multiple frameworks used, there are also multiple instances of access management, that have to be configured.
                        First, most likely the cloud provider has an access management, then MinIO comes with an Access Management.
                        Lastly on top of these LakeFS also has an access management.
                    </p>
                </div>
                <div class="column">
                    <figure class="image">
                        <a href="../images/unknown.png" class="glightbox">
                            <img src="../images/unknown.png" alt="screenshot access managements - login screens or access overviews">
                        </a>
                    </figure>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <p>
                        Evtl noch etwas zum Data Product ablauf ?
                        With the setup running the domain team can look up existing tables in the metadata catalog (dbt or marquez) for their research.
                        With this research, the team can, thanks to trino, easily combine tables
                        from other domain teams even if they have other source databases.
                    </p>

                </div>
                <div class="column">
                    <figure class="image">
                        <a href="../images/unknown.png" class="glightbox">
                            <img src="../images/unknown.png" alt="screenshot of metadata catalog or combination query">
                        </a>
                    </figure>
                </div>
            </div>

            <div>
                <ul>
                    <li>Highly flexible tech stack, with benefits and challenges</li>
                    <li>similar to snowflake when dbt is integrated</li>
                    <li>fully open souce for code transparency</li>
                    <li>free of charge</li>
                    <li>high customizability through coding, with benefits and challenges</li>
                </ul>
            </div>


            <h5>References</h5>
            <ul>
                <li><a href="https://docs.min.io">Official MinIO documentation</a></li>
                <li><a href="https://docs.lakefs.io">Official lakeFS documentation</a></li>
                <li><a href="https://trino.io/docs/current/">Official trino documentation</a></li>
                <li><a href="https://lakefs.io/category/integrations/">Various lakeFS blogposts to integration of lakeFS with MinIO and Trino</a></li>
            </ul>

        </div>
    </section>

</div>

<footer class="footer">
    <div class="content has-text-centered">
        <p>
            <a href="https://www.innoq.com">
                <img src="/images/supported-by-innoq--petrol-apricot.svg" alt="Supported by INNOQ" class="footer-logo" width="180" />
            </a>
        </p>
        <p>
            <a href="https://www.innoq.com/en/impressum/">Legal Notice</a>
            &nbsp
            <a href="https://www.innoq.com/en/datenschutz/">Privacy</a>
        </p>
    </div>
</footer>

<script src="/js/navigation.js"></script>

<script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
<noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>

<link rel="stylesheet" href="/css/glightbox.css" />
<script src="/js/glightbox.js"></script>
<script type="text/javascript">
  const lightbox = GLightbox({});
</script>


<script src="/js/anchor.min.js"></script>
<script>anchors.add();</script>
</body>

</html>
